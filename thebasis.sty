\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{thebasis}[2023/07/26 A package providing common configuration.]

% package options
%% language options
\DeclareOption{spanish}{
  \PassOptionsToPackage{\CurrentOption, es-tabla, es-nodecimaldot}{babel}
}
\DeclareOption{english}{
  \PassOptionsToPackage{\CurrentOption}{babel}
}
\ProcessOptions\relax

%fonts
\InputIfFileExists{thefonts.sty}{}{}

%colors
\InputIfFileExists{thecolor.sty}{}{}

% language
\RequirePackage{babel}
\RequirePackage{csquotes}

% tables
\RequirePackage{booktabs}

% floats
\RequirePackage{subcaption}

%captions
\RequirePackage{caption}
\captionsetup{labelfont={sf}, labelsep=space}

% columns
\RequirePackage{multicol}

% translations
\RequirePackage{translations}

% links
\makeatletter
\@ifclassloaded{beamer}{}
{
  \RequirePackage[hidelinks, unicode, psdextra]{hyperref}

  \hypersetup{
      linktoc = all
  }
}
\makeatother


% listings
\RequirePackage{listings}

\DeclareTranslationFallback{algorithm-name}{Algorithm}
\DeclareTranslation{English}{algorithm-name}{Algorithm}
\DeclareTranslation{Spanish}{algorithm-name}{Algoritmo}

\renewcommand{\lstlistingname}{\GetTranslation{algorithm-name}}

\lstdefinestyle{global}{
  basicstyle=\normalfont,
  belowcaptionskip=1\baselineskip,
  breaklines=true,
  captionpos=b,
  columns=fullflexible,
  keywords = {if, for, while, exit, return},
  keywordstyle=\itshape,
  mathescape=true,
  numbers=left,
  showstringspaces=false,
  xleftmargin=\parindent,
}

\lstset{style=global}


% glossaries
% The option automake is needed to generate glossaries automatically with LaTeX Workshop default recipe.
%\RequirePackage[acronym, toc, automake=true]{glossaries}

% aesthetics
\renewcommand\labelitemi{$\cdotp$} %Use vertically centered dot as first-level bullet-point.
\renewcommand\labelitemii{$\cdotp$} %Use vertically centered dot as second-level bullet-point.

% math
\RequirePackage{xfrac}

% section title format
\setcounter{secnumdepth}{5} % Add numbering to paragraph level.

\makeatletter
\@ifclassloaded{beamer}{}
{
  \RequirePackage{titlesec}

  \titleformat{\section}{\bfseries\sffamily\large}{\thesection}{1em}{\scshape}
  \titleformat{\subsection}{\bfseries\sffamily}{\thesubsection}{1em}{\scshape}
  \titleformat{\subsubsection}{\sffamily}{\thesubsubsection}{1em}{\scshape}
  \titleformat{\paragraph}{\sffamily}{\theparagraph}{1em}{}
  \titleformat{\subparagraph}{\sffamily}{}{1em}{}
}
\makeatother
