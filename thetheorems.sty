\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{thetheorems}[2023/07/26 A package providing several theorem-like environments in different languages for the Minerva project.]

\RequirePackage{translations}
\RequirePackage{amsthm}
\RequirePackage{letltxmacro}

% Define numbering option according to loaded class
\makeatletter
\@ifclassloaded{book}{
  \def\mynumbering{chapter}
}
{
  \def\mynumbering{section}
}
\makeatother

\newtheoremstyle{thetheoremstyle}%
  {\topsep}%
  {\topsep}%
  {\normalfont}%
  {}%
  {\sffamily\bfseries}%
  {\\}%
  { }%
  {\thmname{#1} \thmnumber{#2} \thmnote{#3}}%
\theoremstyle{thetheoremstyle}

\DeclareTranslationFallback{theorem-name}{Theorem}
\DeclareTranslation{English}{theorem-name}{Theorem}
\DeclareTranslation{Spanish}{theorem-name}{Teorema}

\newtheorem{theorem}{\GetTranslation{theorem-name}}[\mynumbering]
\newtheorem*{theorem*}{\GetTranslation{theorem-name}}

\DeclareTranslationFallback{lemma-name}{Lemma}
\DeclareTranslation{English}{lemma-name}{Lemma}
\DeclareTranslation{Spanish}{lemma-name}{Lema}

\newtheorem{lemma}{\GetTranslation{lemma-name}}[\mynumbering]
\newtheorem*{lemma*}{\GetTranslation{lemma-name}}

\DeclareTranslationFallback{proposition-name}{Proposition}
\DeclareTranslation{English}{proposition-name}{Proposition}
\DeclareTranslation{Spanish}{proposition-name}{Proposición}

\newtheorem{proposition}{\GetTranslation{proposition-name}}[\mynumbering]
\newtheorem*{proposition*}{\GetTranslation{proposition-name}}

\DeclareTranslationFallback{corollary-name}{Corollary}
\DeclareTranslation{English}{corollary-name}{Corollary}
\DeclareTranslation{Spanish}{corollary-name}{Corolario}

\newtheorem{corollary}{\GetTranslation{corollary-name}}[\mynumbering]

\DeclareTranslationFallback{definition-name}{Definition}
\DeclareTranslation{English}{definition-name}{Definition}
\DeclareTranslation{Spanish}{definition-name}{Definición}

\newtheorem{definition}{\GetTranslation{definition-name}}[\mynumbering]
\newtheorem*{definition*}{\GetTranslation{definition-name}}

\DeclareTranslationFallback{idea-name}{Idea}
\DeclareTranslation{English}{idea-name}{Idea}
\DeclareTranslation{Spanish}{idea-name}{Idea}

\newtheorem{idea}{\GetTranslation{idea-name}}[\mynumbering]

\DeclareTranslationFallback{notation-name}{Notation}
\DeclareTranslation{English}{notation-name}{Notation}
\DeclareTranslation{Spanish}{notation-name}{Notación}

\newtheorem{notation}{\GetTranslation{notation-name}}[\mynumbering]

\DeclareTranslationFallback{example-name}{Example}
\DeclareTranslation{English}{example-name}{Example}
\DeclareTranslation{Spanish}{example-name}{Ejemplo}

\newtheorem{example}{\GetTranslation{example-name}}[\mynumbering]
\newtheorem*{example*}{\GetTranslation{example-name}}

\DeclareTranslationFallback{counterexample-name}{Counterexample}
\DeclareTranslation{English}{counterexample-name}{Counterexample}
\DeclareTranslation{Spanish}{counterexample-name}{Contraejemplo}

\newtheorem{counterexample}{\GetTranslation{counterexample-name}}[\mynumbering]

\DeclareTranslationFallback{problem-name}{Problem}
\DeclareTranslation{English}{problem-name}{Problem}
\DeclareTranslation{Spanish}{problem-name}{Problema}

\newtheorem{problem}{\GetTranslation{problem-name}}[\mynumbering]

\DeclareTranslationFallback{axiom-name}{Axiom}
\DeclareTranslation{English}{axiom-name}{Axiom}
\DeclareTranslation{Spanish}{axiom-name}{Axioma}

\newtheorem{axiom}{\GetTranslation{axiom-name}}[\mynumbering]

\DeclareTranslationFallback{exercise-name}{Exercise}
\DeclareTranslation{English}{exercise-name}{Exercise}
\DeclareTranslation{Spanish}{exercise-name}{Ejercicio}

\newtheorem{exercise}{\GetTranslation{exercise-name}}[\mynumbering]

\DeclareTranslationFallback{scenario-name}{Scenario}
\DeclareTranslation{English}{scenario-name}{Scenario}
\DeclareTranslation{Spanish}{scenario-name}{Escenario}

\newtheorem{scenario}{\GetTranslation{scenario-name}}[\mynumbering]

\DeclareTranslationFallback{law-name}{Law}
\DeclareTranslation{English}{law-name}{Law}
\DeclareTranslation{Spanish}{law-name}{Regla}

\newtheorem{law}{\GetTranslation{law-name}}[\mynumbering]

\makeatletter
\@ifclassloaded{beamer}{
}
{
  \DeclareTranslationFallback{note-name}{Remark}
  \DeclareTranslation{English}{note-name}{Remark}
  \DeclareTranslation{Spanish}{note-name}{Nota}

  \newtheorem{note}{\GetTranslation{note-name}}[\mynumbering]
}
\makeatother



\renewenvironment{proof}
{
  \textbf{\proofname:}
}
{\hfill \scriptsize$\QED$\vspace{1em}}